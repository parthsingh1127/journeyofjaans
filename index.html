<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Our Journey ‚ù§Ô∏è</title>
<style>
  :root {
    --accent: #ff4d6d;
    --fg: #fff;
  }
  * { box-sizing: border-box; }
  html, body {
    height:100%; margin:0;
    font-family: Inter, Poppins, system-ui, sans-serif;
    background:#000; color:var(--fg); overflow:hidden;
  }

  /* ---------- Background slideshow ---------- */
  #bgSlideshow {
    position:fixed; inset:0; z-index:-2;
    overflow:hidden;
  }
  .bg-slide {
    position:absolute; inset:0;
    background-size:cover;
    background-position:center;
    opacity:0;
    transition:opacity 1s ease;
    filter: grayscale(20%) brightness(60%);
  }
  .bg-slide.active {
    opacity:1;
    filter: grayscale(10%) brightness(55%);
  }
  .bg-overlay {
    position:fixed; inset:0; z-index:-1;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.4) 65%);
    pointer-events:none;
  }

  /* ---------- Popup ---------- */
  .overlay {
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    background:rgba(0,0,0,0.6); z-index:20;
  }
  .popup {
    background:#fff; color:#222; padding:24px; border-radius:14px; text-align:center;
    box-shadow:0 18px 60px rgba(0,0,0,0.35); max-width:420px; width:92%;
  }
  .popup h2 { color:var(--accent); margin:0 0 8px; }
  .popup p { margin:0 0 12px; }
  .heart-btn {
    font-size:46px; background:none; border:0; color:var(--accent); cursor:pointer;
    animation: beat 1s infinite;
  }
  @keyframes beat { 0%,100%{transform:scale(1)} 50%{transform:scale(1.2)} }
  .vanish { animation: vanishAnim 650ms forwards ease; }
  @keyframes vanishAnim { to{opacity:0;transform:scale(2)} }

  /* ---------- App ---------- */
  .app {
    position:relative; z-index:10; width:100%; max-width:980px; margin:40px auto; padding:20px;
    opacity:0; transform:translateY(8px);
    transition:opacity .36s ease, transform .36s ease;
    pointer-events:none;
  }
  .app.active { opacity:1; transform:none; pointer-events:auto; }
  .card {
    background:rgba(0,0,0,0.36); backdrop-filter:blur(6px);
    padding:18px; border-radius:12px; color:var(--fg);
  }

  /* Timer boxes */
  .timer { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin:14px 0; }
  .box { min-width:86px; padding:12px 14px; border-radius:10px;
    background:rgba(255,255,255,0.08); text-align:center; }
  .val { font-size:18px; font-weight:700; }
  .label { font-size:11px; color:#ffe8ee; margin-top:6px; }

  /* Controls */
  .controls { display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap; }
  .btn {
    background:var(--accent); color:#fff; border:0; padding:10px 16px; border-radius:999px;
    cursor:pointer; font-weight:700;
  }
  .muted { background:#fff; color:var(--accent); }

  /* Message view */
  .message-view { display:none; }
  .message-view.show { display:block; }
</style>
</head>
<body>

<!-- Background slideshow -->
<div id="bgSlideshow"></div>
<div class="bg-overlay"></div>

<!-- Popup intro -->
<div class="overlay" id="overlay">
  <div class="popup">
    <h2>Hi baby üíï</h2>
    <p>I hope you liked your surprise.<br>I love you so so much</p>
    <button class="heart-btn" id="heart">‚ù§Ô∏è</button>
  </div>
</div>

<!-- App -->
<main class="app" id="app">
  <!-- TIMER VIEW -->
  <section id="timerView" class="card view">
    <h2 style="color:var(--accent)">Our Journey Together</h2>
    <div class="timer" id="timerBoxes"></div>
    <div class="controls">
      <button id="goMessage" class="btn">Click here for another surprise</button>
      <button id="playPause" class="btn muted">‚èØ Play</button>
    </div>
  </section>

  <!-- MESSAGE VIEW -->
  <section id="messageView" class="card view message-view">
    <h2 style="color:var(--accent)">My Dearest Ishu ‚ù§Ô∏è</h2>
    <div style="font-size:16px;line-height:1.6; max-width:760px; margin:0 auto;">
      Every passing moment with you feels magical, meri jaan.<br>
      I fall deeper in love every single day.<br><br>
      I love you so much Ishu ‚ù§Ô∏è You are everything ‚ù§Ô∏è
    </div>
    <div class="controls" style="margin-top:18px;">
      <button id="backTimer" class="btn muted">‚¨Ö Back to Timer</button>
      <button id="playPause2" class="btn muted">‚èØ Play</button>
    </div>
  </section>
</main>

<!-- Music -->
<audio id="audioA" src="Sahiba(KoshalWorld.Com).mp3" preload="auto"></audio>
<audio id="audioB" src="yellow.mp3" preload="auto"></audio>

<script>
/* ========= CONFIG ========= */
const imageUrls = ['us.jpg','us2.jpg','us3.jpg','us4.jpg','us5.jpg'];
const startDate = new Date(2024,0,6,0,0,0);
const SLIDE_INTERVAL = 4500;
const CROSSFADE_MS = 800;

/* Elements */
const overlay = document.getElementById('overlay');
const heart = document.getElementById('heart');
const app = document.getElementById('app');
const timerBoxes = document.getElementById('timerBoxes');
const goMessage = document.getElementById('goMessage');
const messageView = document.getElementById('messageView');
const timerView = document.getElementById('timerView');
const backTimer = document.getElementById('backTimer');
const playPause = document.getElementById('playPause');
const playPause2 = document.getElementById('playPause2');
const bgContainer = document.getElementById('bgSlideshow');
const audioA = document.getElementById('audioA');
const audioB = document.getElementById('audioB');

let slides=[], slideIndex=0, slideTimer;
let activeTrack='A', fadeInterval;

/* ========== Slideshow ========== */
function preloadImages(urls,cb){
  const loaded=[]; let remaining=urls.length;
  urls.forEach(url=>{
    const img=new Image();
    img.onload=()=>{loaded.push(url);if(--remaining===0)cb(loaded);};
    img.onerror=()=>{console.warn('skip',url);if(--remaining===0)cb(loaded);};
    img.src=url;
  });
}
function buildSlides(urls){
  bgContainer.innerHTML=''; slides=[];
  urls.forEach((url,i)=>{
    const s=document.createElement('div');
    s.className='bg-slide'+(i===0?' active':'');
    s.style.backgroundImage=`url("${url}")`;
    bgContainer.appendChild(s); slides.push(s);
  });
}
function startSlides(){
  if(slides.length<=1)return;
  slideIndex=0;
  setInterval(()=>{
    slides[slideIndex].classList.remove('active');
    slideIndex=(slideIndex+1)%slides.length;
    slides[slideIndex].classList.add('active');
  },SLIDE_INTERVAL);
}

/* ========== Timer ========== */
function diff(s,e){
  const start=new Date(s), end=new Date(e);
  let y=end.getFullYear()-start.getFullYear();
  let m=end.getMonth()-start.getMonth();
  let d=end.getDate()-start.getDate();
  let h=end.getHours()-start.getHours();
  let mi=end.getMinutes()-start.getMinutes();
  let se=end.getSeconds()-start.getSeconds();
  if(se<0){se+=60;mi--;} if(mi<0){mi+=60;h--;} if(h<0){h+=24;d--;}
  if(d<0){m--; d+=new Date(end.getFullYear(),end.getMonth(),0).getDate();}
  if(m<0){m+=12;y--;}
  return{y,m,d,h,mi,se};
}
function startTimer(){
  setInterval(()=>{
    const t=diff(startDate,new Date());
    timerBoxes.innerHTML=`
      <div class="box"><div class="val">${t.y}</div><div class="label">Years</div></div>
      <div class="box"><div class="val">${t.m}</div><div class="label">Months</div></div>
      <div class="box"><div class="val">${t.d}</div><div class="label">Days</div></div>
      <div class="box"><div class="val">${String(t.h).padStart(2,'0')}</div><div class="label">Hours</div></div>
      <div class="box"><div class="val">${String(t.mi).padStart(2,'0')}</div><div class="label">Minutes</div></div>
      <div class="box"><div class="val">${String(t.se).padStart(2,'0')}</div><div class="label">Seconds</div></div>`;
  },1000);
}

/* ========== Music ========== */
function setVolumes(a,b){audioA.volume=a;audioB.volume=b;}
function crossfadeTo(target){
  if(fadeInterval)clearInterval(fadeInterval);
  const from=(target==='A')?audioB:audioA;
  const to=(target==='A')?audioA:audioB;
  to.play().catch(()=>{});
  let steps=CROSSFADE_MS/50,step=0;
  fadeInterval=setInterval(()=>{
    step++;
    let f=Math.max(0,1-step/steps),t=Math.min(1,step/steps);
    if(target==='A')setVolumes(t,f);else setVolumes(f,t);
    if(step>=steps){clearInterval(fadeInterval);fadeInterval=null;from.pause();activeTrack=target;updateButtons();}
  },50);
}
function updateButtons(){
  const playing=(activeTrack==='A')?!audioA.paused:!audioB.paused;
  const label=playing?'‚è∏ Pause':'‚ñ∂ Play';
  playPause.textContent=label; playPause2.textContent=label;
}
function togglePlayPause(){
  const track=(activeTrack==='A')?audioA:audioB;
  if(track.paused)track.play();else track.pause();
  updateButtons();
}

/* ========== UI ========== */
function openApp(){
  overlay.classList.add('vanish');
  setTimeout(()=>overlay.style.display='none',650);
  app.classList.add('active');
  preloadImages(imageUrls,(loaded)=>{buildSlides(loaded);startSlides();});
  startTimer();
  audioA.volume=1;audioB.volume=0;audioA.play().catch(()=>{});activeTrack='A';updateButtons();
}
let lastTap=0;
heart.addEventListener('click',()=>{const now=Date.now();if(now-lastTap<400){openApp();lastTap=0;}else lastTap=now;});
goMessage.addEventListener('click',()=>{timerView.style.display='none';messageView.classList.add('show');audioB.currentTime=0;audioB.play().catch(()=>{});crossfadeTo('B');});
backTimer.addEventListener('click',()=>{messageView.classList.remove('show');timerView.style.display='';crossfadeTo('A');});
playPause.addEventListener('click',togglePlayPause);
playPause2.addEventListener('click',togglePlayPause);
</script>
</body>
</html>
