<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>till eternity and beyond‚ù§Ô∏è</title>
  <style>
    :root{ --accent:#ff4d6d; --bg1:#ff9a9e; --bg2:#fad0c4; }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      font-family:"Poppins",sans-serif;
      overflow:hidden;display:flex;align-items:center;justify-content:center;height:100vh;color:#fff;
    }
    .bg-slideshow{position:fixed;inset:0;z-index:-2;overflow:hidden}
    .bg-slide{position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;transition:opacity 1s ease;filter:grayscale(40%) brightness(60%)}
    .bg-slide.active{opacity:1;filter:grayscale(20%) brightness(55%)}
    .bg-overlay{position:fixed;inset:0;z-index:-1;background:rgba(0,0,0,0.25)}

    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:30}
    .popup{background:#fff;color:#333;padding:30px;border-radius:16px;text-align:center;max-width:400px;animation:fadeIn 0.6s ease}
    .popup h2{color:var(--accent);margin-bottom:8px}
    .popup p{margin-bottom:16px}
    .heart-btn{font-size:48px;color:var(--accent);cursor:pointer;animation:beat 1s infinite;background:none;border:none}
    @keyframes beat{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
    @keyframes fadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
    .overlay.fade-out{animation:fadeOut 0.6s forwards}
    @keyframes fadeOut{to{opacity:0;visibility:hidden}}

    .stage{opacity:0;transform:translateY(10px);transition:.5s ease;pointer-events:none;text-align:center;z-index:10;width:100%;max-width:960px;padding:20px}
    .stage.active{opacity:1;transform:none;pointer-events:auto}
    .card{background:rgba(0,0,0,0.4);backdrop-filter:blur(6px);padding:20px;border-radius:14px}

    .timer{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:15px}
    .time-box{background:rgba(255,255,255,0.1);padding:12px 16px;border-radius:10px;min-width:80px}
    .time-val{font-size:20px;font-weight:600}
    .time-label{font-size:12px;opacity:0.8}

    .btn{background:#fff;color:var(--accent);padding:10px 16px;border-radius:999px;border:none;font-weight:600;cursor:pointer;margin:5px}
    .music{margin-top:10px}
  </style>
</head>
<body>
  <div class="bg-slideshow" id="bgSlideshow"></div>
  <div class="bg-overlay"></div>

  <div class="overlay" id="overlay">
    <div class="popup">
      <h2>Hi baby üíï</h2>
      <p>I hope you liked your surprise.<br>I love you so so much</p>
      <button class="heart-btn" id="popupHeart">‚ù§Ô∏è</button>
    </div>
  </div>

  <div class="stage" id="stage">
    <div class="card">
      <h2>Our Journey Together</h2>
      <div class="timer" id="timerBoxes"></div>

      <button class="btn" onclick="location.href='message.html'">Click here for another surprise</button>

      <div class="music">
        <button class="btn" id="musicToggle">‚è∏ Pause Music</button>
      </div>
    </div>
  </div>

  <audio id="bgMusic" src="Sahiba(KoshalWorld.Com).mp3" preload="auto"></audio>

<script>
(function(){
  const images=["us.jpg","us3.jpg","us5.jpg","us6.jpg","us7.jpg","us8.jpg","us9.jpg","us10.jpg"];
  const startDate=new Date(2024,0,6,0,0,0);

  const overlay=document.getElementById("overlay");
  const popupHeart=document.getElementById("popupHeart");
  const stage=document.getElementById("stage");
  const timerBoxes=document.getElementById("timerBoxes");
  const bgSlideshow=document.getElementById("bgSlideshow");
  const music=document.getElementById("bgMusic");
  const musicToggle=document.getElementById("musicToggle");

  let bgSlides=[],bgIndex=0;

  // Build background slides
  function buildBgSlides(){
    images.forEach((src,i)=>{
      const d=document.createElement("div");
      d.className="bg-slide";
      d.style.backgroundImage=`url(${src})`;
      if(i===0) d.classList.add("active");
      bgSlideshow.appendChild(d);
      bgSlides.push(d);
    });
  }
  buildBgSlides();
  setInterval(()=>{
    const prev=bgIndex;bgIndex=(bgIndex+1)%bgSlides.length;
    bgSlides[prev].classList.remove("active");
    bgSlides[bgIndex].classList.add("active");
  },4500);

  // Timer
  function getDiff(s,e){
    let years=e.getFullYear()-s.getFullYear();
    let months=e.getMonth()-s.getMonth();
    let days=e.getDate()-s.getDate();
    let hours=e.getHours()-s.getHours();
    let minutes=e.getMinutes()-s.getMinutes();
    let seconds=e.getSeconds()-s.getSeconds();
    if(seconds<0){seconds+=60;minutes--;}
    if(minutes<0){minutes+=60;hours--;}
    if(hours<0){hours+=24;days--;}
    if(days<0){let pm=new Date(e.getFullYear(),e.getMonth(),0).getDate();days+=pm;months--;}
    if(months<0){months+=12;years--;}
    return{years,months,days,hours,minutes,seconds};
  }
  function renderTimer(d){
    timerBoxes.innerHTML=`
      <div class="time-box"><div class="time-val">${d.years}</div><div class="time-label">Years</div></div>
      <div class="time-box"><div class="time-val">${d.months}</div><div class="time-label">Months</div></div>
      <div class="time-box"><div class="time-val">${d.days}</div><div class="time-label">Days</div></div>
      <div class="time-box"><div class="time-val">${String(d.hours).padStart(2,'0')}</div><div class="time-label">Hours</div></div>
      <div class="time-box"><div class="time-val">${String(d.minutes).padStart(2,'0')}</div><div class="time-label">Minutes</div></div>
      <div class="time-box"><div class="time-val">${String(d.seconds).padStart(2,'0')}</div><div class="time-label">Seconds</div></div>`;
  }
  setInterval(()=>{renderTimer(getDiff(startDate,new Date()));},1000);

  // Music persistence
  function syncMusic(){
    const savedTime=parseFloat(localStorage.getItem("musicTime")||"0");
    const isPlaying=localStorage.getItem("musicPlaying")==="true";
    music.currentTime=savedTime||0;
    music.loop=true;
    if(isPlaying){
      music.play().catch(()=>{});
      musicToggle.textContent="‚è∏ Pause Music";
    } else {
      musicToggle.textContent="‚ñ∂ Play Music";
    }
  }
  syncMusic();
  setInterval(()=>{if(!music.paused){localStorage.setItem("musicTime",music.currentTime);}},1000);

  musicToggle.addEventListener("click",()=>{
    if(music.paused){music.play();musicToggle.textContent="‚è∏ Pause Music";localStorage.setItem("musicPlaying","true");}
    else{music.pause();musicToggle.textContent="‚ñ∂ Play Music";localStorage.setItem("musicPlaying","false");}
  });

  // Overlay unlock
  function activate(){
    overlay.classList.add("fade-out");
    setTimeout(()=>{overlay.style.display="none";stage.classList.add("active");},600);
    localStorage.setItem("unlocked","true");
  }
  popupHeart.addEventListener("dblclick",activate);
  popupHeart.addEventListener("click",()=>{
    const now=Date.now();
    if(window.lastTap && now-window.lastTap<400){activate();window.lastTap=0;}else{window.lastTap=now;}
  });

  // If already unlocked, skip overlay
  if(localStorage.getItem("unlocked")==="true"){
    overlay.style.display="none";
    stage.classList.add("active");
  }
})();
</script>
</body>
</html>

