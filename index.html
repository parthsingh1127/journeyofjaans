<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Our Journey ‚ù§Ô∏è</title>
<style>
  :root { --accent:#ff4d6d; --fg:#fff; }
  *{box-sizing:border-box;}
  html, body { height:100%; margin:0; font-family:Poppins, sans-serif; background:#000; color:var(--fg); overflow:hidden; }

  #bgSlideshow { position:fixed; inset:0; z-index:-2; overflow:hidden; }
  .bg-slide { position:absolute; inset:0; background-size:cover; background-position:center; opacity:0; transition:opacity 1s ease; filter:grayscale(20%) brightness(60%); }
  .bg-slide.active { opacity:1; filter:grayscale(10%) brightness(70%); }
  .bg-overlay { position:fixed; inset:0; z-index:-1; background:rgba(0,0,0,0.25); }

  .overlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:20; }
  .popup { background:#fff; color:#222; padding:24px; border-radius:14px; text-align:center; max-width:420px; width:90%; box-shadow:0 18px 60px rgba(0,0,0,0.35); }
  .popup h2 { color:var(--accent); margin:0 0 8px; }
  .popup p { margin:0 0 12px; }
  .heart-btn { background:none; border:none; font-size:46px; cursor:pointer; color:var(--accent); animation:beat 1s infinite; }
  @keyframes beat { 0%,100% {transform:scale(1);} 50% {transform:scale(1.2);} }

  .app { position:relative; z-index:10; width:90%; max-width:900px; margin:50px auto; padding:20px; opacity:0; transform:translateY(8px); transition:opacity .36s ease, transform .36s ease; pointer-events:none; }
  .app.active { opacity:1; transform:translateY(0); pointer-events:auto; }
  .card { background:rgba(0,0,0,0.45); backdrop-filter:blur(6px); color:var(--fg); padding:20px; border-radius:12px; text-align:center; }
  .timer { display:flex; justify-content:center; flex-wrap:wrap; gap:12px; margin:20px 0; }
  .time-box { background:rgba(255,255,255,0.1); padding:15px 18px; border-radius:10px; min-width:80px; }
  .val { font-size:18px; font-weight:700; }
  .label { font-size:12px; margin-top:4px; color:#ffe8ee; }
  .controls { display:flex; justify-content:center; gap:10px; margin-top:16px; flex-wrap:wrap; }
  .btn { background:var(--accent); color:#fff; border:none; padding:10px 16px; border-radius:999px; cursor:pointer; font-weight:700; }
  .btn.muted { background:#fff; color:var(--accent); }

  .message-view { display:none; }
  .message-view.show { display:block; }

  @media(max-width:640px){ .val{font-size:16px;} }
</style>
</head>
<body>

<div id="bgSlideshow"></div>
<div class="bg-overlay"></div>

<div class="overlay" id="overlay">
  <div class="popup">
    <h2>Hi baby üíï</h2>
    <p>I hope you liked your surprise.<br>I love you so so much</p>
    <button class="heart-btn" id="popupHeart">‚ù§Ô∏è</button>
  </div>
</div>

<main class="app" id="app">
  <section id="timerView" class="card">
    <h2 style="color:var(--accent)">Our Journey Together</h2>
    <div class="timer" id="timerBoxes"></div>
    <div class="controls">
      <button id="goMessage" class="btn">Another surprise</button>
      <button id="playPause" class="btn muted">‚èØ Play</button>
    </div>
  </section>

  <section id="messageView" class="card message-view">
    <h2 style="color:var(--accent)">My Dearest Ishu ‚ù§Ô∏è</h2>
    <div style="font-size:16px;line-height:1.6;">
      Every passing moment with you feels magical, meri jaan.<br>
      I fall deeper in love every single day.<br><br>
      I love you so much Ishu ‚ù§Ô∏è You are everything ‚ù§Ô∏è
    </div>
    <div class="controls">
      <button id="backTimer" class="btn muted">‚¨Ö Timer</button>
      <button id="playPause2" class="btn muted">‚èØ Play</button>
    </div>
  </section>
</main>

<audio id="audioA" src="Sahiba(KoshalWorld.Com).mp3" preload="auto"></audio>
<audio id="audioB" src="yellow.mp3" preload="auto"></audio>

<script>
const images = ['us.jpg','us2.jpg','us3.jpg','us4.jpg','us5.jpg','us6.jpg','us7.jpg','us8.jpg','us9.jpg','us10.jpg'];
const startDate = new Date(2024,0,6,0,0,0);
const SLIDE_INTERVAL = 4500, CROSSFADE_MS = 800;

const overlay = document.getElementById('overlay'),
      heart = document.getElementById('popupHeart'),
      app = document.getElementById('app'),
      timerBoxes = document.getElementById('timerBoxes'),
      goMessage = document.getElementById('goMessage'),
      messageView = document.getElementById('messageView'),
      timerView = document.getElementById('timerView'),
      backTimer = document.getElementById('backTimer'),
      playPause = document.getElementById('playPause'),
      playPause2 = document.getElementById('playPause2'),
      bgSlideshow = document.getElementById('bgSlideshow'),
      audioA = document.getElementById('audioA'),
      audioB = document.getElementById('audioB');

let slides=[], slideIndex=0, slideTimer, activeTrack='A', fadeInterval;

function preloadImages(arr,cb){
  let rem=arr.length, load=[];
  arr.forEach(u=>{
    const img=new Image();
    img.onload=()=>{ load.push(u); if(--rem===0) cb(load); };
    img.onerror=()=>{ if(--rem===0) cb(load); };
    img.src=u;
  });
}

function buildSlides(list){
  bgSlideshow.innerHTML=''; slides=[];
  list.forEach((u,i)=>{
    const d=document.createElement('div');
    d.className='bg-slide'+(i===0?' active':'');
    d.style.backgroundImage=`url("${u}")`;
    bgSlideshow.appendChild(d); slides.push(d);
  });
}

function startSlides(){
  if(slides.length<=1)return;
  slideIndex=0;
  slideTimer=setInterval(()=>{
    slides[slideIndex].classList.remove('active');
    slideIndex=(slideIndex+1)%slides.length;
    slides[slideIndex].classList.add('active');
  },SLIDE_INTERVAL);
}

function diff(s,e){
  const start=new Date(s), end=new Date(e);
  let y=end.getFullYear()-start.getFullYear(),
      m=end.getMonth()-start.getMonth(),
      d=end.getDate()-start.getDate(),
      h=end.getHours()-start.getHours(),
      mi=end.getMinutes()-start.getMinutes(),
      se=end.getSeconds()-start.getSeconds();
  if(se<0){se+=60;mi--;}
  if(mi<0){mi+=60;h--;}
  if(h<0){h+=24;d--;}
  if(d<0){m--; d+=new Date(end.getFullYear(),end.getMonth(),0).getDate();}
  if(m<0){m+=12; y--;}
  return {y,m,d,h,mi,se};
}

function startTimer(){
  setInterval(()=>{
    const t=diff(startDate,new Date());
    timerBoxes.innerHTML=`
      <div class="box"><div class="val">${t.y}</div><div class="label">Years</div></div>
      <div class="box"><div class="val">${t.m}</div><div class="label">Months</div></div>
      <div class="box"><div class="val">${t.d}</div><div class="label">Days</div></div>
      <div class="box"><div class="val">${String(t.h).padStart(2,'0')}</div><div class="label">Hours</div></div>
      <div class="box"><div class="val">${String(t.mi).padStart(2,'0')}</div><div class="label">Minutes</div></div>
      <div class="box"><div class="val">${String(t.se).padStart(2,'0')}</div><div class="label">Seconds</div></div>`;
  },1000);
}

function setVol(a,b){audioA.volume=a;audioB.volume=b;}
function crossfade(to){
  clearInterval(fadeInterval);
  const from=(to==='A')?audioB:audioA, dest=(to==='A')?audioA:audioB;
  dest.play().catch(()=>{});
  let step=0, max= CROSSFADE_MS/50;
  fadeInterval=setInterval(()=>{
    step++;
    const fa=(max-step)/max, fb=step/max;
    if(to==='A') setVol(fb,fa); else setVol(fa,fb);
    if(step>=max){clearInterval(fadeInterval); from.pause(); activeTrack=to; updateBtns();}
  },50);
}

function updateBtns(){
  const playing = (activeTrack==='A')?!audioA.paused:!audioB.paused;
  const label = playing?'‚è∏ Pause':'‚ñ∂ Play';
  playPause.textContent=label;
  playPause2.textContent=label;
}

function togglePlay(){
  const track=(activeTrack==='A')?audioA:audioB;
  track[track.paused?'play':'pause']();
  updateBtns();
}

function openApp(){
  overlay.classList.add('vanish');
  setTimeout(()=>overlay.style.display='none',700);
  app.classList.add('active');
  preloadImages(imageUrls,list=>{
    buildSlides(list);
    startSlides();
  });
  startTimer();
  audioA.volume=1; audioB.volume=0; audioA.play().catch(()=>{}); activeTrack='A'; updateBtns();
}

let lastTap=0;
heart.addEventListener('click',()=>{const now=Date.now(); if(now-lastTap<400)openApp(); else lastTap=now;});
goMessage.addEventListener('click',()=>{
  timerView.style.display='none';
  messageView.classList.add('show');
  audioB.currentTime=0; audioB.play().catch(()=>{});
  crossfade('B');
});
backTimer.addEventListener('click',()=>{
  messageView.classList.remove('show');
  timerView.style.display='';
  crossfade('A');
});
playPause.addEventListener('click',togglePlay);
playPause2.addEventListener('click',togglePlay);

</script>
</body>
</html>
